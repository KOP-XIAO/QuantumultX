if ($response.statusCode != 200) {
  $done(null);
}

const emojis= ['ğŸ†˜','ğŸˆ²','âš ï¸','ğŸ”','ğŸ“µ','ğŸš¦','ğŸ–','ğŸ–¥','ğŸ“º','ğŸ§','ğŸ¬','ğŸ¦‰','ğŸ„','â›³ï¸','ğŸš´','ğŸ¤‘','ğŸ‘½','ğŸ¤–','ğŸƒ', 'ğŸ‘º', 'ğŸ‘', 'ğŸ¶', 'ğŸ¼','ğŸŒ', 'ğŸ‘¥']
var city0 = "é«˜è°­å¸‚";
var isp0 = "Cross-GFW.org";
function getRandomInt(max) {
  return Math.floor(Math.random() * Math.floor(max));
}

function City_ValidCheck(para) {
  if(para) {
  return para
  } else
  {
  return city0
//emojis[getRandomInt(emojis.length)]
  }
}

function ISP_ValidCheck(para) {
  if(para) {
  return para
  } else
  {
  return isp0
//emojis[getRandomInt(emojis.length)]
  }
}

function Area_check(para) {
  if(para=="ä¸­åæ°‘å›½"){
  return "å°æ¹¾"
  } else
  {
  return para
  }
}

var flags = new Map([["AC","ğŸ‡¦ğŸ‡¨"],["AD","ğŸ‡¦ğŸ‡©"],["AE","ğŸ‡¦ğŸ‡ª"],["AF","ğŸ‡¦ğŸ‡«"],["AG","ğŸ‡¦ğŸ‡¬"],["AI","ğŸ‡¦ğŸ‡®"],["AL","ğŸ‡¦ğŸ‡±"],["AM","ğŸ‡¦ğŸ‡²"],["AO","ğŸ‡¦ğŸ‡´"],["AQ","ğŸ‡¦ğŸ‡¶"],["AR","ğŸ‡¦ğŸ‡·"],["AS","ğŸ‡¦ğŸ‡¸"],["AT","ğŸ‡¦ğŸ‡¹"],["AU","ğŸ‡¦ğŸ‡º"],["AW","ğŸ‡¦ğŸ‡¼"],["AX","ğŸ‡¦ğŸ‡½"],["AZ","ğŸ‡¦ğŸ‡¿"],["BA","ğŸ‡§ğŸ‡¦"],["BB","ğŸ‡§ğŸ‡§"],["BD","ğŸ‡§ğŸ‡©"],["BE","ğŸ‡§ğŸ‡ª"],["BF","ğŸ‡§ğŸ‡«"],["BG","ğŸ‡§ğŸ‡¬"],["BH","ğŸ‡§ğŸ‡­"],["BI","ğŸ‡§ğŸ‡®"],["BJ","ğŸ‡§ğŸ‡¯"],["BM","ğŸ‡§ğŸ‡²"],["BN","ğŸ‡§ğŸ‡³"],["BO","ğŸ‡§ğŸ‡´"],["BR","ğŸ‡§ğŸ‡·"],["BS","ğŸ‡§ğŸ‡¸"],["BT","ğŸ‡§ğŸ‡¹"],["BV","ğŸ‡§ğŸ‡»"],["BW","ğŸ‡§ğŸ‡¼"],["BY","ğŸ‡§ğŸ‡¾"],["BZ","ğŸ‡§ğŸ‡¿"],["CA","ğŸ‡¨ğŸ‡¦"],["CD","ğŸ‡¨ğŸ‡©"],["CF","ğŸ‡¨ğŸ‡«"],["CG","ğŸ‡¨ğŸ‡¬"],["CH","ğŸ‡¨ğŸ‡­"],["CI","ğŸ‡¨ğŸ‡®"],["CK","ğŸ‡¨ğŸ‡°"],["CL","ğŸ‡¨ğŸ‡±"],["CM","ğŸ‡¨ğŸ‡²"],["CN","ğŸ‡¨ğŸ‡³"],["CO","ğŸ‡¨ğŸ‡´"],["CP","ğŸ‡¨ğŸ‡µ"],["CR","ğŸ‡¨ğŸ‡·"],["CU","ğŸ‡¨ğŸ‡º"],["CV","ğŸ‡¨ğŸ‡»"],["CW","ğŸ‡¨ğŸ‡¼"],["CX","ğŸ‡¨ğŸ‡½"],["CY","ğŸ‡¨ğŸ‡¾"],["CZ","ğŸ‡¨ğŸ‡¿"],["DE","ğŸ‡©ğŸ‡ª"],["DG","ğŸ‡©ğŸ‡¬"],["DJ","ğŸ‡©ğŸ‡¯"],["DK","ğŸ‡©ğŸ‡°"],["DM","ğŸ‡©ğŸ‡²"],["DO","ğŸ‡©ğŸ‡´"],["DZ","ğŸ‡©ğŸ‡¿"],["EA","ğŸ‡ªğŸ‡¦"],["EC","ğŸ‡ªğŸ‡¨"],["EE","ğŸ‡ªğŸ‡ª"],["EG","ğŸ‡ªğŸ‡¬"],["EH","ğŸ‡ªğŸ‡­"],["ER","ğŸ‡ªğŸ‡·"],["ES","ğŸ‡ªğŸ‡¸"],["ET","ğŸ‡ªğŸ‡¹"],["EU","ğŸ‡ªğŸ‡º"],["FI","ğŸ‡«ğŸ‡®"],["FJ","ğŸ‡«ğŸ‡¯"],["FK","ğŸ‡«ğŸ‡°"],["FM","ğŸ‡«ğŸ‡²"],["FO","ğŸ‡«ğŸ‡´"],["FR","ğŸ‡«ğŸ‡·"],["GA","ğŸ‡¬ğŸ‡¦"],["GB","ğŸ‡¬ğŸ‡§"],["GD","ğŸ‡¬ğŸ‡©"],["GE","ğŸ‡¬ğŸ‡ª"],["GF","ğŸ‡¬ğŸ‡«"],["GH","ğŸ‡¬ğŸ‡­"],["GI","ğŸ‡¬ğŸ‡®"],["GL","ğŸ‡¬ğŸ‡±"],["GM","ğŸ‡¬ğŸ‡²"],["GN","ğŸ‡¬ğŸ‡³"],["GP","ğŸ‡¬ğŸ‡µ"],["GR","ğŸ‡¬ğŸ‡·"],["GT","ğŸ‡¬ğŸ‡¹"],["GU","ğŸ‡¬ğŸ‡º"],["GW","ğŸ‡¬ğŸ‡¼"],["GY","ğŸ‡¬ğŸ‡¾"],["HK","ğŸ‡­ğŸ‡°"],["HN","ğŸ‡­ğŸ‡³"],["HR","ğŸ‡­ğŸ‡·"],["HT","ğŸ‡­ğŸ‡¹"],["HU","ğŸ‡­ğŸ‡º"],["ID","ğŸ‡®ğŸ‡©"],["IE","ğŸ‡®ğŸ‡ª"],["IL","ğŸ‡®ğŸ‡±"],["IM","ğŸ‡®ğŸ‡²"],["IN","ğŸ‡®ğŸ‡³"],["IR","ğŸ‡®ğŸ‡·"],["IS","ğŸ‡®ğŸ‡¸"],["IT","ğŸ‡®ğŸ‡¹"],["JM","ğŸ‡¯ğŸ‡²"],["JO","ğŸ‡¯ğŸ‡´"],["JP","ğŸ‡¯ğŸ‡µ"],["KE","ğŸ‡°ğŸ‡ª"],["KG","ğŸ‡°ğŸ‡¬"],["KH","ğŸ‡°ğŸ‡­"],["KI","ğŸ‡°ğŸ‡®"],["KM","ğŸ‡°ğŸ‡²"],["KN","ğŸ‡°ğŸ‡³"],["KP","ğŸ‡°ğŸ‡µ"],["KR","ğŸ‡°ğŸ‡·"],["KW","ğŸ‡°ğŸ‡¼"],["KY","ğŸ‡°ğŸ‡¾"],["KZ","ğŸ‡°ğŸ‡¿"],["LA","ğŸ‡±ğŸ‡¦"],["LB","ğŸ‡±ğŸ‡§"],["LC","ğŸ‡±ğŸ‡¨"],["LI","ğŸ‡±ğŸ‡®"],["LK","ğŸ‡±ğŸ‡°"],["LR","ğŸ‡±ğŸ‡·"],["LS","ğŸ‡±ğŸ‡¸"],["LT","ğŸ‡±ğŸ‡¹"],["LU","ğŸ‡±ğŸ‡º"],["LV","ğŸ‡±ğŸ‡»"],["LY","ğŸ‡±ğŸ‡¾"],["MA","ğŸ‡²ğŸ‡¦"],["MC","ğŸ‡²ğŸ‡¨"],["MD","ğŸ‡²ğŸ‡©"],["MG","ğŸ‡²ğŸ‡¬"],["MH","ğŸ‡²ğŸ‡­"],["MK","ğŸ‡²ğŸ‡°"],["ML","ğŸ‡²ğŸ‡±"],["MM","ğŸ‡²ğŸ‡²"],["MN","ğŸ‡²ğŸ‡³"],["MO","ğŸ‡²ğŸ‡´"],["MP","ğŸ‡²ğŸ‡µ"],["MQ","ğŸ‡²ğŸ‡¶"],["MR","ğŸ‡²ğŸ‡·"],["MS","ğŸ‡²ğŸ‡¸"],["MT","ğŸ‡²ğŸ‡¹"],["MU","ğŸ‡²ğŸ‡º"],["MV","ğŸ‡²ğŸ‡»"],["MW","ğŸ‡²ğŸ‡¼"],["MX","ğŸ‡²ğŸ‡½"],["MY","ğŸ‡²ğŸ‡¾"],["MZ","ğŸ‡²ğŸ‡¿"],["NA","ğŸ‡³ğŸ‡¦"],["NC","ğŸ‡³ğŸ‡¨"],["NE","ğŸ‡³ğŸ‡ª"],["NF","ğŸ‡³ğŸ‡«"],["NG","ğŸ‡³ğŸ‡¬"],["NI","ğŸ‡³ğŸ‡®"],["NL","ğŸ‡³ğŸ‡±"],["NO","ğŸ‡³ğŸ‡´"],["NP","ğŸ‡³ğŸ‡µ"],["NR","ğŸ‡³ğŸ‡·"],["NZ","ğŸ‡³ğŸ‡¿"],["OM","ğŸ‡´ğŸ‡²"],["PA","ğŸ‡µğŸ‡¦"],["PE","ğŸ‡µğŸ‡ª"],["PF","ğŸ‡µğŸ‡«"],["PG","ğŸ‡µğŸ‡¬"],["PH","ğŸ‡µğŸ‡­"],["PK","ğŸ‡µğŸ‡°"],["PL","ğŸ‡µğŸ‡±"],["PM","ğŸ‡µğŸ‡²"],["PR","ğŸ‡µğŸ‡·"],["PS","ğŸ‡µğŸ‡¸"],["PT","ğŸ‡µğŸ‡¹"],["PW","ğŸ‡µğŸ‡¼"],["PY","ğŸ‡µğŸ‡¾"],["QA","ğŸ‡¶ğŸ‡¦"],["RE","ğŸ‡·ğŸ‡ª"],["RO","ğŸ‡·ğŸ‡´"],["RS","ğŸ‡·ğŸ‡¸"],["RU","ğŸ‡·ğŸ‡º"],["RW","ğŸ‡·ğŸ‡¼"],["SA","ğŸ‡¸ğŸ‡¦"],["SB","ğŸ‡¸ğŸ‡§"],["SC","ğŸ‡¸ğŸ‡¨"],["SD","ğŸ‡¸ğŸ‡©"],["SE","ğŸ‡¸ğŸ‡ª"],["SG","ğŸ‡¸ğŸ‡¬"],["SI","ğŸ‡¸ğŸ‡®"],["SK","ğŸ‡¸ğŸ‡°"],["SL","ğŸ‡¸ğŸ‡±"],["SM","ğŸ‡¸ğŸ‡²"],["SN","ğŸ‡¸ğŸ‡³"],["SR","ğŸ‡¸ğŸ‡·"],["ST","ğŸ‡¸ğŸ‡¹"],["SV","ğŸ‡¸ğŸ‡»"],["SY","ğŸ‡¸ğŸ‡¾"],["SZ","ğŸ‡¸ğŸ‡¿"],["TC","ğŸ‡¹ğŸ‡¨"],["TD","ğŸ‡¹ğŸ‡©"],["TG","ğŸ‡¹ğŸ‡¬"],["TH","ğŸ‡¹ğŸ‡­"],["TJ","ğŸ‡¹ğŸ‡¯"],["TL","ğŸ‡¹ğŸ‡±"],["TM","ğŸ‡¹ğŸ‡²"],["TN","ğŸ‡¹ğŸ‡³"],["TO","ğŸ‡¹ğŸ‡´"],["TR","ğŸ‡¹ğŸ‡·"],["TT","ğŸ‡¹ğŸ‡¹"],["TV","ğŸ‡¹ğŸ‡»"],["TW","ğŸ‡¨ğŸ‡³"],["TZ","ğŸ‡¹ğŸ‡¿"],["UA","ğŸ‡ºğŸ‡¦"],["UG","ğŸ‡ºğŸ‡¬"],["UK","ğŸ‡¬ğŸ‡§"],["UM","ğŸ‡ºğŸ‡²"],["US","ğŸ‡ºğŸ‡¸"],["UY","ğŸ‡ºğŸ‡¾"],["UZ","ğŸ‡ºğŸ‡¿"],["VA","ğŸ‡»ğŸ‡¦"],["VC","ğŸ‡»ğŸ‡¨"],["VE","ğŸ‡»ğŸ‡ª"],["VG","ğŸ‡»ğŸ‡¬"],["VI","ğŸ‡»ğŸ‡®"],["VN","ğŸ‡»ğŸ‡³"],["VU","ğŸ‡»ğŸ‡º"],["WS","ğŸ‡¼ğŸ‡¸"],["YE","ğŸ‡¾ğŸ‡ª"],["YT","ğŸ‡¾ğŸ‡¹"],["ZA","ğŸ‡¿ğŸ‡¦"],["ZM","ğŸ‡¿ğŸ‡²"],["ZW","ğŸ‡¿ğŸ‡¼"]])

var body = $response.body;
var obj = JSON.parse(body);
var title =flags.get(obj['countryCode']) + ' '+ City_ValidCheck(obj['city']);//+Area_check(obj['country']);
var subtitle = ISP_ValidCheck(obj['org']);
var ip = obj['query'];
var description = 'æœåŠ¡å•†:'+obj['isp'] + '\n'+'åœ°åŒº:' +City_ValidCheck(obj['regionName'])+ '\n' + 'IP:'+ obj['query'] + '\n' +'æ—¶åŒº:'+ obj['timezone'];
$done({title, subtitle, ip, description});
